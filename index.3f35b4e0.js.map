{"mappings":"AEGA,IAAI,EAAO,EAMJ,eAAe,EAAW,CAAW,EAC1C,IAAM,EAAU,MAAM,MACpB,qEAAiC,kEAA4E,gBAA2B,EACxI,IAAA,CAAK,AAAA,GAAK,EAAE,IAFd,IAKA,OADA,GAAQ,EACD,CACT,CDdA,MAAM,EAAS,SAAS,aAAA,CAAc,gBAChC,EAAY,SAAS,aAAA,CAAc,eACnC,EAAqB,SAAS,aAAA,CAAc,YAC5C,EAAY,SAAS,aAAA,CAAc,kBA0EzC,SAAS,EAAc,CAAQ,GAC7B,AAzDF,SAAsB,CAAQ,EAC5B,EAAS,GAAA,CAAI,AAAA,IACX,EAAmB,kBAAA,CAAmB,YASjC,CAAC;;oBAEU,EAAE,AAXgD,EAW5C,YAAA,CAAa;;;;wBAIf,EAAE,AAf4C,EAexC,KAAA,CAAM;;;wBAGZ,EAAE,AAlB4C,EAkBxC,KAAA,CAAM;;;2BAGT,EAAE,AArByC,EAqBrC,QAAA,CAAS;;;4BAGd,EAAE,AAxBwC,EAwBpC,SAAA,CAAU;;;YAGhC,CAAC,CA1BX,EACF,EAqDe,GAlDb,EAAU,SAAA,CAAU,MAAA,CAAO,YAoD7B,CAEA,SAAS,IACP,IAAM,EAAc,EAAO,QAAA,CAAS,WAAA,CAAY,KAAhD,AACA,CAAA,EAAU,QAAA,CAAW,CAAA,EACrB,AAAA,EAAW,GACR,IAAA,CAAK,AAAA,IACJ,GAAI,AAAgB,IAAhB,EAAE,SAAA,CAAiB,CACrB,GAAI,SAAS,aAAA,CAAc,eACzB,OAGF,IAAM,EAAU,SAAS,aAAA,CAAc,KACvC,EAAQ,SAAA,CAAU,GAAA,CAAI,cACtB,EAAQ,WAAA,CACN,2EACF,EAAU,QAAA,CAAW,CAAA,EACrB,EAAU,SAAA,CAAU,GAAA,CAAI,aAExB,EAAmB,KAAA,CAAM,GAEzB,MACF,CAEA,GAAM,CAAA,KAAE,CAAA,CAAI,SAAE,CAAA,CAAU,CCpGrB,CAAE,KAAM,EAAO,EAAG,SAJV,GAImB,EDsG9B,GAAI,EAAO,GAAY,EAAE,SAAA,CAAW,CAClC,GAAI,SAAS,aAAA,CAAc,eACzB,OAEF,IAAM,EAAU,SAAS,aAAA,CAAc,KACvC,EAAQ,SAAA,CAAU,GAAA,CAAI,YACtB,EAAQ,WAAA,CACN,6DAEF,EAAU,SAAA,CAAU,GAAA,CAAI,aACxB,EAAmB,KAAA,CAAM,GACzB,MACF,CAEA,IAAM,EAlEH,AAkE+B,EAlEzB,IAAA,CAAK,GAAA,CAChB,CAAC,CAAA,aACC,CAAA,CAAY,cACZ,CAAA,CAAa,KACb,CAAA,CAAI,MACJ,CAAA,CAAK,MACL,CAAA,CAAK,SACL,CAAA,CAAQ,UACR,CAAA,CACD,GACQ,CAAA,CACL,aAAA,EACA,cAAA,EACA,KAAA,EACA,MAAA,EACA,MAAA,EACA,SAAA,EACA,UAAA,CACF,CAAA,GAiDA,OAAO,CACT,GACC,IAAA,CAAK,GACL,OAAA,CAAQ,KACP,EAAU,QAAA,CAAW,CAAA,CACvB,EACJ,CA1HA,EAAO,gBAAA,CAAiB,SAGxB,SAAsB,CAAC,EACrB,EAAE,cAAF,GACA,EAAmB,SAAA,CAAY,GCO/B,EAAO,EDHP,GACF,GATA,EAAU,gBAAA,CAAiB,QAAS","sources":["<anon>","src/index.js","src/api.js"],"sourcesContent":["const $2107b7db86dec8d6$var$API_KEY = \"37711796-3b567f1c67dcaa6a50c805c9a\";\nconst $2107b7db86dec8d6$var$BASE_URL = \"https://pixabay.com/api\";\nconst $2107b7db86dec8d6$var$PER_PAGE = 100;\nlet $2107b7db86dec8d6$var$page = 1;\nfunction $2107b7db86dec8d6$export$b8b026c034faff76() {\n    return {\n        page: $2107b7db86dec8d6$var$page - 1,\n        PER_PAGE: $2107b7db86dec8d6$var$PER_PAGE\n    };\n}\nasync function $2107b7db86dec8d6$export$a1c549e76b7f385e(searchQuery) {\n    const promise = await fetch(`${$2107b7db86dec8d6$var$BASE_URL}/?key=${$2107b7db86dec8d6$var$API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${$2107b7db86dec8d6$var$page}&per_page=${$2107b7db86dec8d6$var$PER_PAGE}`).then((r)=>r.json());\n    $2107b7db86dec8d6$var$page += 1;\n    return promise;\n}\nfunction $2107b7db86dec8d6$export$e6af8dd0b73b20c2() {\n    $2107b7db86dec8d6$var$page = 1;\n}\n\n\nconst $1f0dc3b9307be026$var$formEl = document.querySelector(\".search-form\");\nconst $1f0dc3b9307be026$var$searchBtn = document.querySelector(\".search-btn\");\nconst $1f0dc3b9307be026$var$galleryContainerEl = document.querySelector(\".gallery\");\nconst $1f0dc3b9307be026$var$loadBtnEl = document.querySelector(\".load-more-btn\");\n$1f0dc3b9307be026$var$formEl.addEventListener(\"submit\", $1f0dc3b9307be026$var$onFormSubmit);\n$1f0dc3b9307be026$var$loadBtnEl.addEventListener(\"click\", $1f0dc3b9307be026$var$fetchApiRequest);\nfunction $1f0dc3b9307be026$var$onFormSubmit(e) {\n    e.preventDefault();\n    $1f0dc3b9307be026$var$galleryContainerEl.innerHTML = \"\";\n    (0, $2107b7db86dec8d6$export$e6af8dd0b73b20c2)();\n    $1f0dc3b9307be026$var$fetchApiRequest();\n}\n// function onLoadMoreBtnClick(e) {\n//   fetchApiRequest();\n// }\nfunction $1f0dc3b9307be026$var$appendMarkup(imgArray) {\n    imgArray.map((img)=>{\n        $1f0dc3b9307be026$var$galleryContainerEl.insertAdjacentHTML(\"beforeEnd\", $1f0dc3b9307be026$var$generateMarkup(img));\n    });\n}\nfunction $1f0dc3b9307be026$var$hideLoadMoreBtn() {\n    $1f0dc3b9307be026$var$loadBtnEl.classList.remove(\"is-hidden\");\n}\nfunction $1f0dc3b9307be026$var$generateMarkup(img) {\n    return `<div class=\"photo-card\">\n        <div class=\"img-wrap\">\n          <img src=\"${img.webformatURL}\" alt=\"\" loading=\"lazy\" class=\"card-img\"/>\n        </div>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>${img.likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>${img.views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>${img.comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>${img.downloads}\n          </p>\n        </div>\n      </div>`;\n}\nfunction $1f0dc3b9307be026$var$getNecessaryFields(array) {\n    return array.hits.map(({ webformatURL: webformatURL , largeImageURL: largeImageURL , tags: tags , likes: likes , views: views , comments: comments , downloads: downloads  })=>{\n        return {\n            webformatURL: webformatURL,\n            largeImageURL: largeImageURL,\n            tags: tags,\n            likes: likes,\n            views: views,\n            comments: comments,\n            downloads: downloads\n        };\n    });\n}\nfunction $1f0dc3b9307be026$var$createContent(imgArray) {\n    $1f0dc3b9307be026$var$appendMarkup(imgArray);\n    $1f0dc3b9307be026$var$hideLoadMoreBtn();\n}\nfunction $1f0dc3b9307be026$var$fetchApiRequest() {\n    const searchQuery = $1f0dc3b9307be026$var$formEl.elements.searchQuery.value;\n    $1f0dc3b9307be026$var$searchBtn.disabled = true;\n    (0, $2107b7db86dec8d6$export$a1c549e76b7f385e)(searchQuery).then((r)=>{\n        if (r.totalHits === 0) {\n            if (document.querySelector(\".error-text\")) return;\n            const newText = document.createElement(\"p\");\n            newText.classList.add(\"error-text\");\n            newText.textContent = \"Sorry, there are no images matching your search query. Please try again.\";\n            $1f0dc3b9307be026$var$searchBtn.disabled = true;\n            $1f0dc3b9307be026$var$loadBtnEl.classList.add(\"is-hidden\");\n            $1f0dc3b9307be026$var$galleryContainerEl.after(newText);\n            return;\n        }\n        const { page: page , PER_PAGE: PER_PAGE  } = (0, $2107b7db86dec8d6$export$b8b026c034faff76)();\n        if (page * PER_PAGE >= r.totalHits) {\n            if (document.querySelector(\".error-text\")) return;\n            const newText = document.createElement(\"p\");\n            newText.classList.add(\"end-text\");\n            newText.textContent = \"We're sorry, but you've reached the end of search results.\";\n            $1f0dc3b9307be026$var$loadBtnEl.classList.add(\"is-hidden\");\n            $1f0dc3b9307be026$var$galleryContainerEl.after(newText);\n            return;\n        }\n        const imgArr = $1f0dc3b9307be026$var$getNecessaryFields(r);\n        return imgArr;\n    }).then($1f0dc3b9307be026$var$createContent).finally(()=>{\n        $1f0dc3b9307be026$var$searchBtn.disabled = false; // Enable search button after API request completion\n    });\n}\n\n\n//# sourceMappingURL=index.3f35b4e0.js.map\n","import { fetchQuery, PER_PAGE, resetPage, getPaginationSet } from './api.js';\n\nconst formEl = document.querySelector('.search-form');\nconst searchBtn = document.querySelector('.search-btn');\nconst galleryContainerEl = document.querySelector('.gallery');\nconst loadBtnEl = document.querySelector('.load-more-btn');\n\nformEl.addEventListener('submit', onFormSubmit);\nloadBtnEl.addEventListener('click', fetchApiRequest);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  galleryContainerEl.innerHTML = '';\n\n  resetPage();\n\n  fetchApiRequest();\n}\n\n// function onLoadMoreBtnClick(e) {\n//   fetchApiRequest();\n// }\n\nfunction appendMarkup(imgArray) {\n  imgArray.map(img => {\n    galleryContainerEl.insertAdjacentHTML('beforeEnd', generateMarkup(img));\n  });\n}\n\nfunction hideLoadMoreBtn() {\n  loadBtnEl.classList.remove('is-hidden');\n}\n\nfunction generateMarkup(img) {\n  return `<div class=\"photo-card\">\n        <div class=\"img-wrap\">\n          <img src=\"${img.webformatURL}\" alt=\"\" loading=\"lazy\" class=\"card-img\"/>\n        </div>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>${img.likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>${img.views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>${img.comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>${img.downloads}\n          </p>\n        </div>\n      </div>`;\n}\n\nfunction getNecessaryFields(array) {\n  return array.hits.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      return {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      };\n    }\n  );\n}\n\nfunction createContent(imgArray) {\n  appendMarkup(imgArray);\n  hideLoadMoreBtn();\n}\n\nfunction fetchApiRequest() {\n  const searchQuery = formEl.elements.searchQuery.value;\n  searchBtn.disabled = true;\n  fetchQuery(searchQuery)\n    .then(r => {\n      if (r.totalHits === 0) {\n        if (document.querySelector('.error-text')) {\n          return;\n        }\n\n        const newText = document.createElement('p');\n        newText.classList.add('error-text');\n        newText.textContent =\n          'Sorry, there are no images matching your search query. Please try again.';\n        searchBtn.disabled = true;\n        loadBtnEl.classList.add('is-hidden');\n\n        galleryContainerEl.after(newText);\n\n        return;\n      }\n\n      const { page, PER_PAGE } = getPaginationSet();\n\n      if (page * PER_PAGE >= r.totalHits) {\n        if (document.querySelector('.error-text')) {\n          return;\n        }\n        const newText = document.createElement('p');\n        newText.classList.add('end-text');\n        newText.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n\n        loadBtnEl.classList.add('is-hidden');\n        galleryContainerEl.after(newText);\n        return;\n      }\n\n      const imgArr = getNecessaryFields(r);\n      return imgArr;\n    })\n    .then(createContent)\n    .finally(() => {\n      searchBtn.disabled = false; // Enable search button after API request completion\n    });\n}\n","const API_KEY = '37711796-3b567f1c67dcaa6a50c805c9a';\nconst BASE_URL = 'https://pixabay.com/api';\nconst PER_PAGE = 100;\nlet page = 1;\n\nexport function getPaginationSet() {\n  return { page: page - 1, PER_PAGE };\n}\n\nexport async function fetchQuery(searchQuery) {\n  const promise = await fetch(\n    `${BASE_URL}/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`\n  ).then(r => r.json());\n\n  page += 1;\n  return promise;\n}\n\nexport function resetPage() {\n  page = 1;\n}\n"],"names":["$2107b7db86dec8d6$var$page","$2107b7db86dec8d6$export$a1c549e76b7f385e","searchQuery","promise","fetch","then","r","json","$1f0dc3b9307be026$var$formEl","document","querySelector","$1f0dc3b9307be026$var$searchBtn","$1f0dc3b9307be026$var$galleryContainerEl","$1f0dc3b9307be026$var$loadBtnEl","$1f0dc3b9307be026$var$createContent","imgArray","$1f0dc3b9307be026$var$appendMarkup","map","img","insertAdjacentHTML","webformatURL","likes","views","comments","downloads","classList","remove","$1f0dc3b9307be026$var$fetchApiRequest","elements","value","disabled","totalHits","newText","createElement","add","textContent","after","page","PER_PAGE","imgArr","array","hits","largeImageURL","tags","finally","addEventListener","e","preventDefault","innerHTML"],"version":3,"file":"index.3f35b4e0.js.map"}